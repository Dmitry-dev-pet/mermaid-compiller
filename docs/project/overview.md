# Обзор проекта

Mermaid Diagram Compiler — SPA для генерации и редактирования диаграмм Mermaid с помощью LLM. Приложение работает локально в браузере и использует два типа провайдеров: OpenRouter или локальный прокси Cliproxy.

## Цели

- Быстро создавать диаграммы Mermaid по текстовому описанию.
- Поддерживать итеративное улучшение через чат и историю.
- Гарантировать валидность Mermaid-кода перед рендером.
- Давать мгновенную визуализацию, удобные инструменты навигации (zoom/pan, fullscreen, fit) и безопасный экспорт.

## Ключевые возможности

- Chat/Build разделены: Chat структурирует intent без кода, Build генерирует валидный Mermaid.
- Полный список типов из локальной документации; при смене типа подгружаются Build Docs файлы и обновляется контекст Build.
- Превью умеет рендерить Markdown и Mermaid-блоки, есть inline-настройки темы/направления/стиля диаграммы.
- Экспорт диаграммы в SVG/PNG с инлайном ресурсов и защитой от `foreignObject`/таинтед canvas.
- Build Docs вкладка с табами файлов документации и системных промптов для каждого режима, плюс чекбоксы включения в контекст.
- Авто-подключение к LLM при запуске, хранение настроек в localStorage.
- Контекст Mermaid-документации грузится локально и используется при Build.
- Авто-фикс синтаксиса после Build до `AUTO_FIX_MAX_ATTEMPTS`.
- История шагов с ревизиями диаграмм (IndexedDB).
- Встроенная проверка Mermaid-кода через `mermaid.parse()`.

## Технологии

- React 19 + Vite + TypeScript.
- Tailwind CSS, Lucide Icons.
- Mermaid.js (рендеринг и валидация).
- Vitest для тестов.

---

Обновлено: 2025-12-24. Согласовано с текущей реализацией (markdown-навигация, scroll sync, frontmatter config).
