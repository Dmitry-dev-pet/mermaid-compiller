# Пользовательские сценарии и UX

## Основной сценарий

1. Выберите тип диаграммы в левой колонке (Chat).
2. Введите запрос и нажмите **Chat** — получите текстовый ответ/уточнения.
3. Нажмите **Build** — генерация/обновление Mermaid-кода.
4. При ошибках используйте **Fix** или **Run** (перегенерация).

## Диалоговые режимы

- **Chat**: текстовый ответ без изменения диаграммы.
- **Build**: генерирует/обновляет Mermaid-код.
- **Run (Recompile)**: перегенерация без нового промпта.
- **Analyze**: объяснение структуры диаграммы.
- **Fix**: исправление синтаксиса, до `AUTO_FIX_MAX_ATTEMPTS`.

## Горячие клавиши

- Enter — отправить Chat.
- Ctrl/Cmd + Enter — Build.

## Язык ответов

- Язык можно выбрать в панели редактора (Auto / EN / RU).
- В режиме Auto язык определяется по первому пользовательскому сообщению и сохраняется.

## Типы диаграмм

Список типов поддерживается в UI:
- sequence, flowchart, class, state, er, gantt, mindmap, pie, timeline, userJourney, c4.

Тип влияет на контекст документации и системные инструкции LLM.

## История и навигация

- Все шаги (Chat/Build/Fix/Run/Manual edit) сохраняются.
- В чате отображаются метки «Diagram renders» — это шаги, где изменилась ревизия.
- По клику на метку происходит переход к соответствующему шагу и переключение ревизии.

## Превью

- SVG рендерится через Mermaid API.
- Доступны zoom/pan, fit/reset и fullscreen (на всю ширину трех колонок).
- При входе/выходе из fullscreen выполняется fit/center.
