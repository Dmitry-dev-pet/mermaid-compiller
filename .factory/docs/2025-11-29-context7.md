Понимание: пользовательский промпт проходит нормализацию, затем уточняется ответом Context7 (docs + style). Итоговый запрос к LLM должен содержать и исходный смысл, и релевантные фрагменты документации.

План действий:
1. В `public/app.js` добавить helper `composeFinalPrompt(userPrompt, docsContext)`:
   • `userPrompt` — нормализованный текст пользователя (с указанием типа диаграммы).
   • `docsContext` — текстовые snippets + style prefs от `/docs/search` (Context7).
   • Helper собирает блок: оригинальный запрос, затем "Relevant documentation:" + snippets, плюс "Styling preferences:" при наличии.

2. В `generateAndCorrectDiagram` и стилевых вызовах заменить текущую вставку docs на вызов helper'а:
   • структура/фиксы получают уже собранный промпт (user + Context7).
   • при отсутствии docsContext helper возвращает просто userPrompt.

3. История итераций сохраняет: `userPromptOriginal`, `userPromptPrepared`, `docsContextRaw`. В модалках показываем, что LLM получил объединённый текст.

4. Context7 запрос по-прежнему строится на основе подготовленного промпта, но теперь гарантировано, что его snippets реально используются в дальнейшем, а не теряются.

После утверждения — реализовать helper, обновить места вызовов, привести историю к новому формату.