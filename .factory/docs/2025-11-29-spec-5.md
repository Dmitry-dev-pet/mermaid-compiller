Детальный план:
1. Структура папок:
   - `public/js/` — модули `state.js`, `api.js`, `ui.js`, `sanitize.js`, `main.js`.
   - `public/styles/` — разбить текущий CSS на `base.css`, `layout.css`, `components.css`.
2. Модули JS:
   - `state.js`: хранение `iterations`, функции `createIterationEntry`, `sanitizeMermaidCode`, экспорт событий для UI.
   - `api.js`: `callCliproxyApiStructure/Style/Fix`, `fetchDocsContext`, `fetchStyleDocsContext`.
   - `ui.js`: рендер карточек, модалок, обработчики кнопок; принимает зависимости из state/api через параметры или импорт.
   - `main.js`: точка входа (инициализация mermaid, чтение DOM, wiring modules).
3. Стилей:
   - `base.css`: переменные, reset, typography.
   - `layout.css`: сетки, карточки, модалки.
   - `components.css`: кнопки, бейджи, статус-боксы.
4. План миграции:
   1) Вынести `sanitizeMermaidCode` и вспомогательные функции в отдельный модуль, подключить через `<script type="module">`.
   2) Перенести state/iteration-логику в `state.js`, обновить импорты.
   3) Вынести API-вызовы в `api.js`; добавить слой-адаптер, чтобы UI не знал про fetch.
   4) Разбить UI на функции (рендер итераций, модалки) и импортировать их в main.
   5) Разнести CSS по файлам, обновить `<link>` в index.html.
   6) Добавить простой тест (например, npm script с vitest) хотя бы для sanitize/state helpers.
   7) После каждого этапа гонять lint + smoke-тест в браузере.
5. По желанию: на следующем шаге перейти на TypeScript/ESLint config и внедрить сборщик (Vite), но это отдельный этап.